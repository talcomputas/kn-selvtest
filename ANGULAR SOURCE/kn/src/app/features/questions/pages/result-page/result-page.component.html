<app-card>
  <div app-card-header>
    <ng-container *ngIf="!showAnswers">{{ 'testIsOver' | content }}</ng-container>
    <ng-container *ngIf="showAnswers">
      <div class="print-content">
        <h2 [innerHTML]="'intro.title' | content"></h2>

        <app-level
          [percentage]="(result.score / result.maxScore) * 100"
          [level]="result.level.id"
          text="{{ 'level' | content }}"
        >
        </app-level>

        <div class="image">
          <img src="assets/images/{{ 'result.image' | content }}" alt="Result image" />
        </div>

        <h3>{{ result.level.title }}</h3>
        <p>{{ result.level.text }}</p>
      </div>

      {{ 'answersTitle' | content }}
      <button app-icon-button class="close" (click)="showAnswers = false">
        <i app-svg-icon="close"></i>
      </button>
    </ng-container>
  </div>

  <div app-card-content>
    <div class="level" *ngIf="!showAnswers; else answers">
      <app-level
        [percentage]="(result.score / result.maxScore) * 100"
        [level]="result.level.id"
        text="{{ 'level' | content }}"
      >
      </app-level>

      <div class="description">
        <div class="image">
          <img src="assets/images/{{ 'result.image' | content }}" alt="Result image" />
        </div>
        <h3>{{ result.level.title }}</h3>
        <p>{{ result.level.text }}</p>
        <div class="buttons">
          <a
            app-stroked-button
            target="_blank"
            href="https://www.kompetansenorge.no/test-deg-selv/rad-og-tips-for-a-bli-bedre/"
            >{{ 'actions.getAdvice' | content }}</a
          >
          <button app-stroked-button (click)="showAnswers = true">
            {{ 'actions.reviewAnswers' | content }}
          </button>
        </div>
      </div>
    </div>
  </div>
  <div style="background-color: lightcoral">
    <!-- TODO: remove this when in production -->
    <table>
      <tr>
        <td>result.score</td>
        <td>{{ result.score }}</td>
      </tr>
      <tr>
        <td>result.maxScore</td>
        <td>{{ result.maxScore }}</td>
      </tr>
      <tr>
        <td>result.level.id</td>
        <td>{{ result.level.id }}</td>
      </tr>
      <tr>
        <td>result.level</td>
        <td>{{ result.level | json }}</td>
      </tr>
    </table>
  </div>
  <footer app-card-footer *ngIf="showAnswers">
    <div class="actions">
      <button app-stroked-button app-color="primary" (click)="showAnswers = false">
        {{ 'actions.backToResult' | content }}
      </button>
    </div>
  </footer>
</app-card>

<ng-template #answers>
  <app-answers [data]="result?.data" (close)="showAnswers = false"></app-answers>
</ng-template>
